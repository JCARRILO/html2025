:root{
      --bg:#ffffff; --ink:#1a1a1a; --muted:#5a6b77; --card:#f5f7f9;
      --brand:#2f6e93; --accent:#e2edf4; --border:#e7ebef; --error:#b00020;
      --shadow:0 8px 24px rgba(0,0,0,.08);
    }
    *{box-sizing:border-box}
    body{margin:0;background:var(--bg);color:var(--ink);font:15px/1.6 system-ui,-apple-system,Segoe UI,Roboto,Arial}
    .wrap{max-width:1100px;margin:0 auto;padding:28px 20px}
    .hero{background:linear-gradient(#cfe0ea, #dfe8ee 38%, var(--bg) 38%);padding:44px 20px 22px}
    .kicker{letter-spacing:.08em;text-transform:uppercase;color:#6e93a8}
    h1{margin:6px 0 4px;color:#254b5a;font-size:clamp(26px,4.5vw,40px);line-height:1.1}
    .sub{margin:8px 0 0;max-width:70ch;color:#314e5d}

    .section{margin:28px 0}
    .card{background:var(--card);border:1px solid var(--border);border-radius:14px;box-shadow:var(--shadow);padding:16px}
    .title{margin:0 0 .25rem;color:#254b5a;font-size:clamp(18px,3vw,24px)}
    .muted{color:var(--muted)}

    .toolbar{display:flex;gap:8px;flex-wrap:wrap;align-items:center;margin:8px 0 12px}
    .toolbar input{padding:8px 10px;border-radius:10px;border:1px solid var(--border);background:#fff}
    .btn{border:1px solid var(--border);background:#fff;border-radius:10px;padding:8px 10px;cursor:pointer}
    .btn.primary{background:var(--brand);color:#fff;border-color:transparent}

    .table-wrap{overflow:auto;border-radius:12px;border:1px solid var(--border);background:#fff}
    table{width:100%;border-collapse:separate;border-spacing:0;min-width:780px;table-layout:fixed}
    caption{caption-side:top;text-align:left;padding:12px 14px;font-weight:700;color:#254b5a}
    /* Centrar solo el caption de la tabla 1 */
    #tabla-ventas caption{text-align:center}
    thead th{position:sticky;top:0;background:#f7fbfe;border-bottom:2px solid var(--border);z-index:2}
    th, td{padding:10px 12px;border-bottom:1px solid var(--border);text-align:left;vertical-align:top}
    /* Alinear numÃ©ricas de columnas 2-5 (regiones) y Ãºltima columna */
    tbody td:nth-child(n+2):nth-child(-n+5),
    tfoot td:nth-child(n+2):nth-child(-n+5),
    tbody td:last-child,
    tfoot td:last-child{ text-align:right }
    tbody tr:nth-child(odd){background:#fafcfe}
    tfoot td, tfoot th{background:#f3f6f9;font-weight:700;border-top:2px solid var(--border)}
    th[scope="row"]{white-space:nowrap}
    .num{text-align:right}
    colgroup col.total{background:#f9fcff}
    /* Anchos fijos por columna para mantener alineaciÃ³n perfecta */
    colgroup col.col-prod{width:32%}
    colgroup col.col-region{width:13.5%}
    colgroup col.col-total{width:14%}
    .tag{display:inline-block;background:#eaf4ec;border:1px solid #d3ead8;color:#246b37;border-radius:999px;padding:.15rem .5rem;font-size:.75rem}

    /* Tabla horario */
    .small{font-size:.9rem}

    /* Accesibilidad visual al ordenar */
    th.sortable{cursor:pointer}
    th.sortable .arrow{opacity:.35;margin-left:.25rem}
    th[aria-sort="ascending"] .arrow::after{content:"\\25B2"}
    th[aria-sort="descending"] .arrow::after{content:"\\25BC"}
    th[aria-sort="none"] .arrow::after{content:"\\2195"}

    @media (max-width:700px){
      .toolbar{flex-direction:column;align-items:stretch}
      .table-wrap{border-radius:10px}
    }
      /* Ajustes SOLO para la tabla 1 (ventas) */
    table{table-layout:auto}
    #tabla-ventas{table-layout:fixed}
    #tabla-ventas th, #tabla-ventas td{ border-right:1px solid var(--border); }
    #tabla-ventas th:first-child, #tabla-ventas td:first-child{ border-left:1px solid var(--border); }
    #tabla-ventas tbody td:nth-child(n+2):nth-child(-n+5),
    #tabla-ventas tfoot td:nth-child(n+2):nth-child(-n+5),
    #tabla-ventas tbody td:last-child,
    #tabla-ventas tfoot td:last-child{ text-align:right }
    /* Reset para NO afectar otras tablas */
    main table:not(#tabla-ventas) td{ text-align:left !important; }    /* Alineación de encabezados SOLO tabla 1 */
    #tabla-ventas thead tr:first-child th{ text-align:center }
    #tabla-ventas thead tr:first-child th:first-child{ text-align:center; vertical-align:middle }
    #tabla-ventas thead tr:first-child th:last-child{ text-align:center }
    /* Forzar centrado explícito del encabezado Total anual */
    #tabla-ventas thead #h-total{ text-align:center !important; vertical-align:middle }
    #tabla-ventas thead tr:nth-child(2) th:nth-child(n+2):nth-child(-n+5){ text-align:right }
    #tabla-ventas thead tr:nth-child(2) th:first-child{ text-align:right }
    #tabla-ventas thead tr:nth-child(2) th:last-child{ text-align:right }

    /* Tabla 3: Permisos (scoped) */
    #tabla-permisos caption{ text-align:center }
    #tabla-permisos thead th{ text-align:center }
    #tabla-permisos thead abbr{ text-decoration:none; border-bottom:none }
    #tabla-permisos tbody th[scope="row"]{ text-align:center; vertical-align:middle; font-weight:400 }
    #tabla-permisos td{ text-align:center; vertical-align:middle }
    /* Asegurar que ? y ? (celdas .num) queden centrados */
    #tabla-permisos td.num{ text-align:center !important; vertical-align:middle }
    #tabla-permisos th, #tabla-permisos td{ border-right:1px solid var(--border); vertical-align:middle }
    #tabla-permisos th:first-child, #tabla-permisos td:first-child{ border-left:1px solid var(--border) }
    /* Colores por estado en permisos */
    #tabla-permisos td.ok{ background:#eaf4ec !important; color:#246b37 !important }
    #tabla-permisos td.no{ background:#fdecec !important; color:#8b1a1a !important }

    /* Tabla 2: Horario (scoped) */
    #tabla-horario caption{ text-align:center }
    #tabla-horario thead th{ text-align:center }
    #tabla-horario tbody th[scope="row"]{ text-align:center }
    #tabla-horario td{ text-align:center; vertical-align:middle }
    #tabla-horario th, #tabla-horario td{ border-right:1px solid var(--border); vertical-align:middle }
    #tabla-horario th:first-child, #tabla-horario td:first-child{ border-left:1px solid var(--border) }
    /* Destacar jornadas completas (fila completa) */
    #tabla-horario tbody tr.full-day th,
    #tabla-horario tbody tr.full-day td{
      background:#fef6e7; /* suave resaltado */
      border-top:2px solid #f0c36d;
      border-bottom:2px solid #f0c36d;
      font-weight:600;
    }

.visually-hidden{ position:absolute; left:-9999px; top:auto; width:1px; height:1px; overflow:hidden }
.lesson-aside{ background:#f8fafc; border:1px solid var(--border); border-radius:12px; padding:12px; margin:0 }
.lesson-aside h2{ margin:0 0 8px; font-size:1rem; color:#254b5a }
.lesson-aside ul{ list-style:none; padding:0; margin:0 }
.lesson-aside li{ display:flex; align-items:center; gap:8px; margin:6px 0; color:#314e5d }
.dot{ width:10px; height:10px; border-radius:50%; display:inline-block }
.dot-structure{ background:var(--k-structure) }
.dot-headers{ background:var(--k-headers) }
    .dot-caption{ background:var(--k-caption) }
    .dot-a11y{ background:var(--k-a11y) }
    .dot-schedule{ background:var(--k-schedule) }
    .dot-perms{ background:var(--k-perms) }
.lesson-aside a{ color:inherit; text-decoration:underline dotted }
.lesson-aside a:hover, .lesson-aside a:focus{ text-decoration:underline }

/* Layout: contenido + aside derecho */
main.wrap{ display:grid; grid-template-columns: minmax(0,1fr) 300px; gap:24px; grid-auto-flow:dense }
.lesson-aside{ position:sticky; top:16px; height:fit-content; grid-column:2; grid-row:1; align-self:start }
main.wrap > :not(.lesson-aside){ grid-column:1 }

/* Resaltado suave por conocimiento */
.card.k-structure{ background:#f0f7f2; border-left:4px solid var(--k-structure) }
thead.k-headers th{ background:#eef7ff !important; border-bottom-color:var(--k-headers) }
caption.k-caption{ background:#f7f1ff; color:#4b3b73; padding:8px 14px; border-left:4px solid var(--k-caption) }
    .toolbar.k-a11y{ background:#fff8e7; border:1px dashed #f0c36d; border-left:4px solid var(--k-a11y); border-radius:10px; padding:8px }
    caption.k-schedule{ background:#fff9ec; color:#6d5210; padding:8px 14px; border-left:4px solid var(--k-schedule) }
    caption.k-perms{ background:#f2fbf6; color:#1f5b3e; padding:8px 14px; border-left:4px solid var(--k-perms) }

/* Resaltado al navegar con el aside */
#k-structure:target{ outline:2px solid var(--k-structure); outline-offset:3px; scroll-margin-top:16px }
thead#k-headers:target th{ box-shadow: inset 0 -3px 0 var(--k-headers) }
caption#k-caption:target{ outline:2px solid var(--k-caption); outline-offset:3px }
    #k-a11y:target{ outline:2px dashed var(--k-a11y); outline-offset:3px }
    caption#k-horario:target{ outline:2px solid var(--k-schedule); outline-offset:3px }
    caption#k-permisos:target{ outline:2px solid var(--k-perms); outline-offset:3px }

html{ scroll-behavior:smooth }

@media (max-width: 1024px){
  main.wrap{ display:flex; flex-direction:column }
  .lesson-aside{ position:static; margin:16px 0; order:99 }
}

:root{
  --k-structure:#78c2a4;
  --k-headers:#6aa0e8;
  --k-caption:#a884e5;
  --k-a11y:#f0b45b;
  --k-schedule:#f0c36d;
  --k-perms:#84c5a3;
}
