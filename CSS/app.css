:root{
  --c1:#6aa0e8; --c2:#78c2a4; --c3:#a884e5; --c4:#f0c36d; --c5:#84c5a3; --c6:#f2a6a6;
  --cx1:#5795D3; --cx2:#7ABF9D; --cx3:#3B82F6;
  --avatar-size:72px;
  --cover-desktop-width:900px;
}

/* Layout principal (reutiliza common.css) */
main.wrap{ display:grid; grid-template-columns: minmax(0,1fr) 320px; gap:24px }
.content{ grid-column:1; min-width:0 }
.content > .lesson{ margin:28px 0 }
.card{ background:#fff; border:1px solid var(--border); border-radius:12px; padding:14px; margin:16px 0 }

/* TOC lateral (modular) */
.toc{ background:#f8fafc; border:1px solid var(--border); border-radius:12px; padding:12px; height:fit-content; position:sticky; top:16px; grid-column:2; grid-row:1 }
.toc h2{ margin:0 0 8px; font-size:1rem }
.toc ol{ margin:0; padding:0; list-style:none }
.toc li{ display:flex; gap:8px; align-items:center; margin:6px 0 }
.toc a{ color:inherit; text-decoration:underline dotted }
.toc .dot{ width:10px; height:10px; border-radius:50%; display:inline-block }
.toc .c1{ background:var(--c1) } .toc .c2{ background:var(--c2) } .toc .c3{ background:var(--c3) }
.toc .c4{ background:var(--c4) } .toc .c5{ background:var(--c5) } .toc .c6{ background:var(--c6) }
.toc .cx1{ background:var(--cx1) } .toc .cx2{ background:var(--cx2) } .toc .cx3{ background:var(--cx3) } .toc .cx4{ background:#ffb86b }
.toc li.is-active a{ font-weight:700; text-decoration:underline }
.toc li.is-active .dot{ box-shadow:0 0 0 3px rgba(0,0,0,.08) }

/* Asociación color por clase (borde izquierdo) */
#clase-1{ border-left:4px solid var(--c1); padding-left:8px }
#clase-2{ border-left:4px solid var(--c2); padding-left:8px }
#clase-3{ border-left:4px solid var(--c3); padding-left:8px }
#clase-4{ border-left:4px solid var(--c4); padding-left:8px }
#clase-5{ border-left:4px solid var(--c5); padding-left:8px }
#clase-6{ border-left:4px solid var(--c6); padding-left:8px }
#css-1{ border-left:4px solid var(--cx1); padding-left:8px }
#css-2{ border-left:4px solid var(--cx2); padding-left:8px }
#css-3{ border-left:4px solid var(--cx3); padding-left:8px }
#css-4{ border-left:4px solid #ffb86b; padding-left:8px }

/* Demo: evitar confusión con único h1 */
.only-demo{ font-size:1rem; opacity:.6 }

/* Clase 3: imágenes */
.gallery{ display:grid; grid-template-columns:repeat(auto-fit,minmax(220px,1fr)); gap:12px }
.gallery figure{ background:#fff; border:1px solid var(--border); border-radius:12px; overflow:hidden; margin:0 }
.gallery figcaption{ padding:8px 10px; font-size:.9rem; color:#44525b; border-top:1px solid var(--border); background:#fafcfe }
.responsive{ width:100%; height:auto; display:block }

/* Clase 4: listas */
.cols{ display:grid; gap:16px; grid-template-columns:repeat(auto-fit,minmax(240px,1fr)) }

/* Clase 6: formularios (mínimo) */
.form-demo form{ display:grid; gap:10px; max-width:520px }
.form-demo input,.form-demo textarea{ border:0; outline:0; border-radius:10px; padding:10px 12px; background:#fff; box-shadow:inset 0 0 0 1px #e1e6eb; font:inherit }
.form-demo textarea{ min-height:100px; resize:vertical }
.form-demo .btn{ border:0; border-radius:12px; padding:10px 16px; background:#2f6e93; color:#fff; font-weight:700; cursor:pointer }
.form-demo .btn:focus-visible{ outline:3px solid #99c1da; outline-offset:2px }

/* Clase 7: tablas (mínimo) */
.table-wrap{ overflow:auto; border:1px solid var(--border); border-radius:10px; background:#fff }
.tbl-basic{ width:100%; border-collapse:separate; border-spacing:0; min-width:720px }
.tbl-basic th, .tbl-basic td{ padding:10px 12px; border-bottom:1px solid var(--border); text-align:left }
.tbl-basic thead th{ position:sticky; top:0; background:#f7fbfe; border-bottom:2px solid var(--border); z-index:1 }
.tbl-basic tfoot th, .tbl-basic tfoot td{ background:#f3f6f9; font-weight:700; border-top:2px solid var(--border) }

/* Utilidades generales para demos */
.grid{ display:grid; gap:12px; grid-template-columns:repeat(auto-fit,minmax(220px,1fr)) }
iframe.embed{ width:100%; aspect-ratio:16/9; border:0 }
video.responsive{ width:100%; height:auto; display:block }
audio.responsive{ width:100% }

/* CSS Clase 3 demos (escopadas) */
.css-c3 input:focus{ outline:2px solid #3498DB; background-color:#E8F4F8 }
.css-c3 .ej-lista{ margin:0; padding-left:1.25rem }
.css-c3 .ej-lista li{ margin:.25rem 0 }
.css-c3 .ej-lista li:first-child{ color:var(--cx2); font-weight:700 }
.css-c3 .ej-lista li:last-child{ color:#D64545; font-weight:700 }
.css-c3 .ej-tabla{ width:100%; border-collapse:separate; border-spacing:0; min-width:420px }
.css-c3 .ej-tabla th, .css-c3 .ej-tabla td{ padding:10px 12px; border-bottom:1px solid var(--border); text-align:left }
.css-c3 .ej-tabla tbody tr:nth-child(even){ background:#efefef }
.css-c3 .quotes{ display:inline-block; padding:.25rem .35rem; background:#f7f9fb; border:1px solid var(--border); border-radius:8px }
.css-c3 .quotes::before{ content:'\"'; color:var(--cx3); font-size:24px; margin-right:.15rem }
.css-c3 .quotes::after{ content:'\"'; color:var(--cx3); font-size:24px; margin-left:.15rem }

/* Avatar fijo (siempre visible) */
.avatar-fixed{ position:fixed; right:16px; bottom:16px; width:var(--avatar-size); height:var(--avatar-size); border-radius:50%; overflow:hidden; background:#fff; border:2px solid #fff; box-shadow:0 10px 20px rgba(0,0,0,.15); z-index:1000; cursor:default }
.avatar-fixed img{ width:100%; height:100%; object-fit:cover; display:block }
@media (max-width:780px){
  :root{ --avatar-size:56px }
  .avatar-fixed{ right:12px; bottom:12px }
}
@media (prefers-reduced-motion:no-preference){
  .avatar-fixed{ transition: transform .2s ease }
  .avatar-fixed:hover{ transform: scale(1.03) }
}

/* Override portada: usar gradiente y mostrar imagen <img.site-cover> */
/* Portada como background sin deformarse y layout flexible */
header.site{
  background-image:
    linear-gradient(180deg, rgba(207,224,234,.85), rgba(223,232,238,.85)),
    url('../assets/images/portadadeheader.jpeg') !important;
  background-repeat:no-repeat; background-position:center top; background-size:contain;
  display:flex; align-items:flex-end;
  max-width:var(--cover-desktop-width); /* ancho igual a la portada en desktop */
  margin:0 auto; /* centrar */
  padding:0 !important; /* sin padding superior/inferior */
}
/* Ajuste exacto al tamaño de la portada: usa dimensiones naturales y respeta viewport */
header.site.has-cover{
  width:min(100%, calc(var(--cover-w, 900) * 1px));
  aspect-ratio: calc(var(--cover-w, 900) / var(--cover-h, 300));
  background-size:100% 100%; /* llenar sin distorsión si ratio coincide */
}
/* H1 fluido: se adapta al dispositivo sin desbordar */
header.site h1{ font-size:clamp(24px, 5vw, 48px); line-height:1.08 }
@media (min-width:1024px){ header.site{ min-height:320px } }
@media (max-width:1023.98px){ header.site{ min-height:220px; max-width:100% } }

/* Grid robusto para evitar solapamiento del TOC en desktop */
main.wrap{ display:grid; grid-template-columns:minmax(0,1fr) 320px; gap:24px; align-items:start }
.toc{ grid-column:2; position:sticky; top:16px; z-index:0 }
/* Elevar especificidad para vencer main.wrap > :not(.lesson-aside) de common.css */
main.wrap > .toc{ grid-column:2 !important }
.content{ grid-column:1; min-width:0 }

/* Responsive */
@media (max-width:1024px){
  main.wrap{ display:flex; flex-direction:column }
  .toc{ position:static; order:99; margin:16px 0 }
}
